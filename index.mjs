// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.2-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.2-esm/index.mjs";import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@v0.2.2-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@v0.2.2-esm/index.mjs";import{isPrimitive as n}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.2-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-shape2strides@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-strides2offset@v0.2.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-strides2order@v0.2.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@v0.2.2-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@v0.2.2-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-data-type@v0.2.2-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-order@v0.2.2-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-casting-mode@v0.2.2-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-allowed-data-type-cast@v0.2.2-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer@v0.3.0-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer-dtype@v0.3.0-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-dtype@v0.2.2-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-shape@v0.2.2-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-strides@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-offset@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-order@v0.2.2-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-data-buffer@esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/array-shape@esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-flatten@esm/index.mjs";import k from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import B from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@esm/index.mjs";import P from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-integer@esm/index.mjs";import R from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-defaults@esm/index.mjs";import Y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer-ctors@esm/index.mjs";import C from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-alloc-unsafe@esm/index.mjs";import D from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-base-cast-return@esm/index.mjs";import X from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-ctors@esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@esm/index.mjs";import q from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-dtype@esm/index.mjs";import z from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-shape@esm/index.mjs";import A from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-order@esm/index.mjs";import F from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";function G(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&P(e.length)&&e.length>=0&&e.length<B}function H(e,s){var r;return r=new _(q(e),w(e),z(e),v(e),u(e),A(e)),"generic"===s?function(e){var s,r,t;for(s=e.length,r=[],t=0;t<s;t++)r.push(e.iget(t));return r}(r):"binary"===s?function(e){var s,r,t;for(s=e.length,r=C(s),t=0;t<s;t++)r[t]=e.iget(t);return r}(r):function(e,s){var r,t,n,i,d,o;if(t=new(Y(s))(r=e.length),(d=D(t)).accessorProtocol)for(n=d.accessors[1],i=V((function(s){return e.iget(s)}),1,X(s)),o=0;o<r;o++)n(t,o,i(o));else for(o=0;o<r;o++)t[o]=e.iget(o);return t}(r,s)}var I={casting:R.get("casting"),copy:!1,dtype:R.get("dtypes.default"),flatten:!0,mode:R.get("index_mode"),ndmin:0,order:R.get("order"),readonly:!1};function J(){var B,P,R,D,V,X,_,q,z,A,J,K,L,M;if(1===arguments.length)if(G(arguments[0]))R=arguments[0],B={};else{if(!s(B=arguments[0]))throw new TypeError(k("0hT56",B));if(e(B,"buffer")&&!G(R=B.buffer))throw new TypeError(k("0hT57","buffer",R))}else{if(!G(R=arguments[0]))throw new TypeError(k("0hT58",R));if(!s(B=arguments[1]))throw new TypeError(k("0hT2V",B))}if(R&&(i(R)?(_=b(R),M=!0):(_=g(R)||"generic",M=!1)),A={},J={},e(B,"casting")){if(J.casting=B.casting,!f(J.casting))throw new TypeError(k("0hT59","casting",J.casting))}else J.casting=I.casting;if(e(B,"flatten")){if(J.flatten=B.flatten,!r(J.flatten))throw new TypeError(k("0hT2o","flatten",J.flatten))}else J.flatten=I.flatten;if(e(B,"ndmin")){if(J.ndmin=B.ndmin,!n(J.ndmin))throw new TypeError(k("0hT2t","ndmin",J.ndmin))}else J.ndmin=I.ndmin;if(e(B,"dtype")){if(X=B.dtype,!h(X))throw new TypeError(k("0hTBf","dtype",X));if(_&&!j(_,X,J.casting))throw new Error(k("0hT5B",J.casting,_,X))}else X=_&&(M||"generic"!==_)?_:I.dtype;if(e(B,"order")){if("any"===(V=B.order)||"same"===V)M?"any"===V?V=3===m(v(R))?I.order:x(R):"same"===V&&(V=x(R)):V=I.order;else if(!p(V))throw new TypeError(k("0hT5C","order",V))}else V=I.order;if(e(B,"mode")?A.mode=B.mode:A.mode=I.mode,e(B,"submode")?A.submode=B.submode:A.submode=[A.mode],e(B,"readonly")?A.readonly=B.readonly:A.readonly=I.readonly,e(B,"copy")){if(J.copy=B.copy,!r(J.copy))throw new TypeError(k("0hT2o","copy",J.copy))}else J.copy=I.copy;if(e(B,"shape")){if(!G(q=B.shape))throw new TypeError(k("0hT5D","shape",q));z=q.length,L=a(q)}else{if(!R)throw new Error(k("0hT0X"));M?(z=(q=y(R)).length,L=a(q)):J.flatten&&t(R)?(K=q=T(R),z=q.length,L=a(q)):(z=1,q=[L=R.length])}if(z<J.ndmin&&(q=function(e,s,r){var t,n;for(t=[],n=0;n<r-e;n++)t.push(1);for(n=0;n<e;n++)t.push(s[n]);return t}(z,q,J.ndmin),z=J.ndmin),M){if(a(R.shape)!==L)throw new RangeError(k("0hT0Y"));_!==X||J.copy?R=H(R,X):(P=v(R),D=u(R),R=w(R),P.length<z&&(P=function(e,s,r,t){var n,i,d,o,m;if(m=e-(i=r.length),n=[],"row-major"===t){for(d=F(r[0])*s[m],o=0;o<m;o++)n.push(d);for(o=0;o<i;o++)n.push(r[o])}else{for(o=0;o<m;o++)n.push(1);for(o=0;o<i;o++)n.push(r[o])}return n}(z,q,P,V)))}else if(R){if("generic"===_&&J.flatten&&t(R)&&(R=E(R,K||T(R),"column-major"===V)),R.length!==L)throw new RangeError(k("0hT0Y"));(_!==X||J.copy)&&(R=function(e,s,r){var t,n,i;if(t=Y(r),"generic"===r)for(n=[],i=0;i<s;i++)n.push(e[i]);else if("binary"===r)for(n=C(s),i=0;i<s;i++)n[i]=e[i];else for(n=new t(s),i=0;i<s;i++)n[i]=e[i];return n}(R,L,X))}else R=c(X,L);return void 0===P&&(P=d(q,V),D=o(q,P)),new l(X,R,q,P,D,V,A)}export{J as default};
//# sourceMappingURL=index.mjs.map
