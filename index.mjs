// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.2-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.2-esm/index.mjs";import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@v0.2.2-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@v0.2.2-esm/index.mjs";import{isPrimitive as n}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.2-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-shape2strides@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-strides2offset@v0.2.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-strides2order@v0.2.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@v0.2.2-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@v0.2.2-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-column-major-string@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-data-type@v0.2.2-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-order@v0.2.2-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-casting-mode@v0.2.2-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-allowed-data-type-cast@v0.2.2-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer@v0.3.0-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer-dtype@v0.3.0-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-dtype@v0.2.2-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-shape@v0.2.2-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-strides@v0.2.2-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-offset@v0.2.2-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-order@v0.2.2-esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-data-buffer@v0.2.2-esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/array-shape@v0.2.2-esm/index.mjs";import k from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-flatten@v0.2.1-esm/index.mjs";import B from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";import P from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@v0.2.2-esm/index.mjs";import R from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-integer@v0.2.5-esm/index.mjs";import Y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-defaults@v0.3.0-esm/index.mjs";import C from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer-ctors@v0.3.0-esm/index.mjs";import D from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-alloc-unsafe@v0.2.2-esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@v0.2.1-esm/index.mjs";import X from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-base-cast-return@v0.2.2-esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-ctors@v0.2.2-esm/index.mjs";import q from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@v0.2.2-esm/index.mjs";import z from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-row-major-string@esm/index.mjs";import A from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@v0.2.2-esm/index.mjs";function F(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&R(e.length)&&e.length>=0&&e.length<P}function G(e,s){var r;return r=new q(b(e),T(e),y(e),u(e),x(e),w(e)),"generic"===s?function(e){var s,r,t;for(s=e.length,r=[],t=0;t<s;t++)r.push(e.iget(t));return r}(r):"binary"===s?function(e){var s,r,t;for(s=e.length,r=D(s),t=0;t<s;t++)r[t]=e.iget(t);return r}(r):function(e,s){var r,t,n,i,d,o;if(t=new(C(s))(r=e.length),(d=V(t)).accessorProtocol)for(n=d.accessors[1],i=X((function(s){return e.iget(s)}),1,_(s)),o=0;o<r;o++)n(t,o,i(o));else for(o=0;o<r;o++)t[o]=e.iget(o);return t}(r,s)}var H={casting:Y.get("casting"),copy:!1,dtype:Y.get("dtypes.default"),flatten:!0,mode:Y.get("index_mode"),ndmin:0,order:Y.get("order"),readonly:!1};function I(){var P,R,Y,V,X,_,q,I,J,K,L,M,N,O;if(1===arguments.length)if(F(arguments[0]))Y=arguments[0],P={};else{if(!s(P=arguments[0]))throw new TypeError(B("0hT56",P));if(e(P,"buffer")&&!F(Y=P.buffer))throw new TypeError(B("0hT57","buffer",Y))}else{if(!F(Y=arguments[0]))throw new TypeError(B("0hT58",Y));if(!s(P=arguments[1]))throw new TypeError(B("0hT2V",P))}if(Y&&(i(Y)?(q=b(Y),O=!0):(q=v(Y)||"generic",O=!1)),K={},L={},e(P,"casting")){if(L.casting=P.casting,!j(L.casting))throw new TypeError(B("0hT59","casting",L.casting))}else L.casting=H.casting;if(e(P,"flatten")){if(L.flatten=P.flatten,!r(L.flatten))throw new TypeError(B("0hT2o","flatten",L.flatten))}else L.flatten=H.flatten;if(e(P,"ndmin")){if(L.ndmin=P.ndmin,!n(L.ndmin))throw new TypeError(B("0hT2t","ndmin",L.ndmin))}else L.ndmin=H.ndmin;if(e(P,"dtype")){if(_=P.dtype,!f(_))throw new TypeError(B("0hTBf","dtype",_));if(q&&!c(q,_,L.casting))throw new Error(B("0hT5B",L.casting,q,_))}else _=q&&(O||"generic"!==q)?q:H.dtype;if(e(P,"order")){if("any"===(X=P.order)||"same"===X)O?"any"===X?X=3===m(u(Y))?H.order:w(Y):"same"===X&&(X=w(Y)):X=H.order;else if(!p(X))throw new TypeError(B("0hT5C","order",X))}else X=H.order;if(e(P,"mode")?K.mode=P.mode:K.mode=H.mode,e(P,"submode")?K.submode=P.submode:K.submode=[K.mode],e(P,"readonly")?K.readonly=P.readonly:K.readonly=H.readonly,e(P,"copy")){if(L.copy=P.copy,!r(L.copy))throw new TypeError(B("0hT2o","copy",L.copy))}else L.copy=H.copy;if(e(P,"shape")){if(!F(I=P.shape))throw new TypeError(B("0hT5D","shape",I));J=I.length,N=a(I)}else{if(!Y)throw new Error(B("0hT0X"));O?(J=(I=y(Y)).length,N=a(I)):L.flatten&&t(Y)?(M=I=E(Y),J=I.length,N=a(I)):(J=1,I=[N=Y.length])}if(J<L.ndmin&&(I=function(e,s,r){var t,n;for(t=[],n=0;n<r-e;n++)t.push(1);for(n=0;n<e;n++)t.push(s[n]);return t}(J,I,L.ndmin),J=L.ndmin),O){if(a(Y.shape)!==N)throw new RangeError(B("0hT0Y"));q!==_||L.copy?Y=G(Y,_):(R=u(Y),V=x(Y),Y=T(Y),R.length<J&&(R=function(e,s,r,t){var n,i,d,o,m;if(m=e-(i=r.length),n=[],z(t)){for(d=A(r[0])*s[m],o=0;o<m;o++)n.push(d);for(o=0;o<i;o++)n.push(r[o])}else{for(o=0;o<m;o++)n.push(1);for(o=0;o<i;o++)n.push(r[o])}return n}(J,I,R,X)))}else if(Y){if("generic"===q&&L.flatten&&t(Y)&&(Y=k(Y,M||E(Y),h(X))),Y.length!==N)throw new RangeError(B("0hT0Y"));(q!==_||L.copy)&&(Y=function(e,s,r){var t,n,i;if(t=C(r),"generic"===r)for(n=[],i=0;i<s;i++)n.push(e[i]);else if("binary"===r)for(n=D(s),i=0;i<s;i++)n[i]=e[i];else for(n=new t(s),i=0;i<s;i++)n[i]=e[i];return n}(Y,N,_))}else Y=g(_,N);return void 0===R&&(R=d(I,X),V=o(I,R)),new l(_,Y,I,R,V,X,K)}export{I as default};
//# sourceMappingURL=index.mjs.map
