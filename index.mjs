// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-shape2strides@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-strides2offset@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-strides2order@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-data-type@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-order@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-casting-mode@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-allowed-data-type-cast@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer-dtype@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/array-shape@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-flatten-array@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-integer@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer-ctors@esm/index.mjs";import L from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-alloc-unsafe@esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";var T=v,P=w;var R=function(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&P(e.length)&&e.length>=0&&e.length<T},Y={casting:"safe",copy:!1,dtype:"float64",flatten:!0,mode:"throw",ndmin:0,order:"row-major",readonly:!1},k=x,K=L;var M=function(e,r,s){var t,n,i;if(t=k(s),"generic"===s)for(n=[],i=0;i<r;i++)n.push(e[i]);else if("binary"===s)for(n=K(r),i=0;i<r;i++)n[i]=e[i];else for(n=new t(r),i=0;i<r;i++)n[i]=e[i];return n},N=x,O=L;var Q=function(e,r){return"generic"===r?function(e){var r,s,t;for(r=e.length,s=[],t=0;t<r;t++)s.push(e.get(t));return s}(e):"binary"===r?function(e){var r,s,t;for(r=e.length,s=O(r),t=0;t<r;t++)s[t]=e.get(t);return s}(e):function(e,r){var s,t,n;for(t=new(N(r))(s=e.length),n=0;n<s;n++)t[n]=e.get(n);return t}(e,r)};var X=function(e,r,s){var t,n;for(t=[],n=0;n<s-e;n++)t.push(1);for(n=0;n<e;n++)t.push(r[n]);return t},q=E;var z=function(e,r,s,t){var n,i,d,o,a;if(a=e-(i=s.length),n=[],"row-major"===t){for(d=q(s[0])*r[a],o=0;o<a;o++)n.push(d);for(o=0;o<i;o++)n.push(s[o])}else{for(o=0;o<a;o++)n.push(1);for(o=0;o<i;o++)n.push(s[o])}return n},A=e,B=r,C=s.isPrimitive,D=t,F=n.isPrimitive,G=i,H=d,I=o,J=a,S=m,U=f,V=l,W=p,Z=h,$=j,_=c,ee=g,re=y,se=b,te=u,ne=R,ie=Y,de=M,oe=Q,ae=X,me=z;var fe=function(){var e,r,s,t,n,i,d,o,a,m,f,l,p;if(1===arguments.length)if(ne(arguments[0]))s=arguments[0],e={};else{if(!B(e=arguments[0]))throw new TypeError(te("0Le5K",e));if(A(e,"buffer")&&(s=e.buffer,!ne(s)))throw new TypeError(te("0Le5L","buffer",s))}else{if(!ne(s=arguments[0]))throw new TypeError(te("0Le5M",s));if(!B(e=arguments[1]))throw new TypeError(te("0Le2h",e))}if(s&&(G(s)?(d=s.dtype,p=!0):(d=ee(s),p=!1)),m={},f={},A(e,"casting")){if(f.casting=e.casting,!Z(f.casting))throw new TypeError(te("0Le5N","casting",f.casting))}else f.casting=ie.casting;if(A(e,"flatten")){if(f.flatten=e.flatten,!C(f.flatten))throw new TypeError(te("0Le30","flatten",f.flatten))}else f.flatten=ie.flatten;if(A(e,"ndmin")){if(f.ndmin=e.ndmin,!F(f.ndmin))throw new TypeError(te("0Le35","ndmin",f.ndmin))}else f.ndmin=ie.ndmin;if(A(e,"dtype")){if(i=e.dtype,!V(i))throw new TypeError(te("0Le5O","dtype",i));if(d&&!$(d,i,f.casting))throw new Error(te("0Le5P",f.casting,d,i))}else i=d&&(p||"generic"!==d)?d:ie.dtype;if(A(e,"order")){if("any"===(n=e.order)||"same"===n)p?"any"===n?n=3===J(s.strides)?ie.order:s.order:"same"===n&&(n=s.order):n=ie.order;else if(!W(n))throw new TypeError(te("0Le5Q","order",n))}else n=ie.order;if(A(e,"mode")?m.mode=e.mode:m.mode=ie.mode,A(e,"submode")?m.submode=e.submode:m.submode=[m.mode],A(e,"readonly")?m.readonly=e.readonly:m.readonly=ie.readonly,A(e,"copy")){if(f.copy=e.copy,!C(f.copy))throw new TypeError(te("0Le30","copy",f.copy))}else f.copy=ie.copy;if(A(e,"shape")){if(o=e.shape,!ne(o))throw new TypeError(te("0Le5R","shape",o));a=o.length,l=S(o)}else{if(!s)throw new Error(te("0Le0X"));p?(o=s.shape,a=s.ndims,l=s.length):f.flatten&&D(s)?(a=(o=re(s)).length,l=S(o)):(a=1,o=[l=s.length])}if(a<f.ndmin&&(o=ae(a,o,f.ndmin),a=f.ndmin),p){if(s.length!==l)throw new RangeError(te("0Le0Y"));d!==i||f.copy?s=oe(s,i):(r=s.strides,t=s.offset,s=s.data,r.length<a&&(r=me(a,o,r,n)))}else if(s){if("generic"===d&&f.flatten&&(s=se(s)),s.length!==l)throw new RangeError(te("0Le0Y"));(d!==i||f.copy)&&(s=de(s,l,i))}else s=_(i,l);return void 0===r&&(r=H(o,n),t=I(o,r)),new U(i,s,o,r,t,n,m)},le=fe;export{le as default};
//# sourceMappingURL=index.mjs.map
